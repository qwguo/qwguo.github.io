"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?e(require("../../lib/codemirror"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../css/css"],e):e(CodeMirror)}(function(e){e.defineMode("sass",function(r){function t(e){return!e.peek()||e.match(/\s+$/,!1)}function n(e,r){var t=e.peek();return")"===t?(e.next(),r.tokenizer=s,"operator"):"("===t?(e.next(),e.eatSpace(),"operator"):"'"===t||'"'===t?(r.tokenizer=i(e.next()),"string"):(r.tokenizer=i(")",!1),"string")}function o(e,r){return function(t,n){return t.sol()&&t.indentation()<=e?(n.tokenizer=s,s(t,n)):(r&&t.skipTo("*/")?(t.next(),t.next(),n.tokenizer=s):t.skipToEnd(),"comment")}}function i(e,r){function n(o,i){var a=o.next(),f=o.peek(),c=o.string.charAt(o.pos-2);return"\\"!==a&&f===e||a===e&&"\\"!==c?(a!==e&&r&&o.next(),t(o)&&(i.cursorHalf=0),i.tokenizer=s,"string"):"#"===a&&"{"===f?(i.tokenizer=u(n),o.next(),"operator"):"string"}return null==r&&(r=!0),n}function u(e){return function(r,t){return"}"===r.peek()?(r.next(),t.tokenizer=e,"operator"):s(r,t)}}function a(e){if(0==e.indentCount){e.indentCount++;var t=e.scopes[0].offset,n=t+r.indentUnit;e.scopes.unshift({offset:n})}}function f(e){1!=e.scopes.length&&e.scopes.shift()}function s(e,r){var c=e.peek();if(e.match("/*"))return r.tokenizer=o(e.indentation(),!0),r.tokenizer(e,r);if(e.match("//"))return r.tokenizer=o(e.indentation(),!1),r.tokenizer(e,r);if(e.match("#{"))return r.tokenizer=u(s),"operator";if('"'===c||"'"===c)return e.next(),r.tokenizer=i(c),"string";if(r.cursorHalf){if("#"===c&&(e.next(),e.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/)))return t(e)&&(r.cursorHalf=0),"number";if(e.match(/^-?[0-9\.]+/))return t(e)&&(r.cursorHalf=0),"number";if(e.match(/^(px|em|in)\b/))return t(e)&&(r.cursorHalf=0),"unit";if(e.match(w))return t(e)&&(r.cursorHalf=0),"keyword";if(e.match(/^url/)&&"("===e.peek())return r.tokenizer=n,t(e)&&(r.cursorHalf=0),"atom";if("$"===c)return e.next(),e.eatWhile(/[\w-]/),t(e)&&(r.cursorHalf=0),"variable-2";if("!"===c)return e.next(),r.cursorHalf=0,e.match(/^[\w]+/)?"keyword":"operator";if(e.match(b))return t(e)&&(r.cursorHalf=0),"operator";if(e.eatWhile(/[\w-]/))return t(e)&&(r.cursorHalf=0),p=e.current().toLowerCase(),h.hasOwnProperty(p)?"atom":d.hasOwnProperty(p)?"keyword":m.hasOwnProperty(p)?(r.prevProp=e.current().toLowerCase(),"property"):"tag";if(t(e))return r.cursorHalf=0,null}else{if("-"===c&&e.match(/^-\w+-/))return"meta";if("."===c){if(e.next(),e.match(/^[\w-]+/))return a(r),"qualifier";if("#"===e.peek())return a(r),"tag"}if("#"===c){if(e.next(),e.match(/^[\w-]+/))return a(r),"builtin";if("#"===e.peek())return a(r),"tag"}if("$"===c)return e.next(),e.eatWhile(/[\w-]/),"variable-2";if(e.match(/^-?[0-9\.]+/))return"number";if(e.match(/^(px|em|in)\b/))return"unit";if(e.match(w))return"keyword";if(e.match(/^url/)&&"("===e.peek())return r.tokenizer=n,"atom";if("="===c&&e.match(/^=[\w-]+/))return a(r),"meta";if("+"===c&&e.match(/^\+[\w-]+/))return"variable-3";if("@"===c&&e.match(/@extend/)&&(e.match(/\s*[\w]/)||f(r)),e.match(/^@(else if|if|media|else|for|each|while|mixin|function)/))return a(r),"def";if("@"===c)return e.next(),e.eatWhile(/[\w-]/),"def";if(e.eatWhile(/[\w-]/)){if(e.match(/ *: *[\w-\+\$#!\("']/,!1)){p=e.current().toLowerCase();var l=r.prevProp+"-"+p;return m.hasOwnProperty(l)?"property":m.hasOwnProperty(p)?(r.prevProp=p,"property"):y.hasOwnProperty(p)?"property":"tag"}return e.match(/ *:/,!1)?(a(r),r.cursorHalf=1,r.prevProp=e.current().toLowerCase(),"property"):e.match(/ *,/,!1)?"tag":(a(r),"tag")}if(":"===c)return e.match(v)?"variable-3":(e.next(),r.cursorHalf=1,"operator")}return e.match(b)?"operator":(e.next(),null)}function c(e,t){e.sol()&&(t.indentCount=0);var n=t.tokenizer(e,t),o=e.current();if("@return"!==o&&"}"!==o||f(t),null!==n){for(var i=e.pos-o.length,u=i+r.indentUnit*t.indentCount,a=[],s=0;s<t.scopes.length;s++){var c=t.scopes[s];c.offset<=u&&a.push(c)}t.scopes=a}return n}var p,l=e.mimeModes["text/css"],m=l.propertyKeywords||{},d=l.colorKeywords||{},h=l.valueKeywords||{},y=l.fontProperties||{},k=["true","false","null","auto"],w=new RegExp("^"+k.join("|")),x=["\\(","\\)","=",">","<","==",">=","<=","\\+","-","\\!=","/","\\*","%","and","or","not",";","\\{","\\}",":"],b=function(e){return new RegExp("^"+e.join("|"))}(x),v=/^::?[a-zA-Z_][\w\-]*/;return{startState:function(){return{tokenizer:s,scopes:[{offset:0,type:"sass"}],indentCount:0,cursorHalf:0,definedVars:[],definedMixins:[]}},token:function(e,r){var t=c(e,r);return r.lastToken={style:t,content:e.current()},t},indent:function(e){return e.scopes[0].offset}}},"css"),e.defineMIME("text/x-sass","sass")});