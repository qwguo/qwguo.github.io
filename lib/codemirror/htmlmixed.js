"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"object"==("undefined"==typeof module?"undefined":_typeof(module))?t(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],t):t(CodeMirror)}(function(t){function e(t,e,n){var a=t.current(),o=a.search(e);return o>-1?t.backUp(a.length-o):a.match(/<\/?$/)&&(t.backUp(a.length),t.match(e,!1)||t.match(a)),n}function n(t){var e=c[t];return e||(c[t]=new RegExp("\\s+"+t+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}function a(t,e){var a=t.match(n(e));return a?/^\s*(.*?)\s*$/.exec(a[2])[1]:""}function o(t,e){return new RegExp((e?"^":"")+"</s*"+t+"s*>","i")}function l(t,e){for(var n in t)for(var a=e[n]||(e[n]=[]),o=t[n],l=o.length-1;l>=0;l--)a.unshift(o[l])}function r(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(!o[0]||o[1].test(a(e,o[0])))return o[2]}}var i={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},c={};t.defineMode("htmlmixed",function(n,a){function c(a,l){var i,f=s.token(a,l.htmlState),m=/\btag\b/.test(f);if(m&&!/[<>\s\/]/.test(a.current())&&(i=l.htmlState.tagName&&l.htmlState.tagName.toLowerCase())&&u.hasOwnProperty(i))l.inTag=i+" ";else if(l.inTag&&m&&/>$/.test(a.current())){var d=/^([\S]+) (.*)/.exec(l.inTag);l.inTag=null;var p=">"==a.current()&&r(u[d[1]],d[2]),g=t.getMode(n,p),y=o(d[1],!0),S=o(d[1],!1);l.token=function(t,n){return t.match(y,!1)?(n.token=c,n.localState=n.localMode=null,null):e(t,S,n.localMode.token(t,n.localState))},l.localMode=g,l.localState=t.startState(g,s.indent(l.htmlState,"",""))}else l.inTag&&(l.inTag+=a.current(),a.eol()&&(l.inTag+=" "));return f}var s=t.getMode(n,{name:"xml",htmlMode:!0,multilineTagIndentFactor:a.multilineTagIndentFactor,multilineTagIndentPastTag:a.multilineTagIndentPastTag}),u={},f=a&&a.tags,m=a&&a.scriptTypes;if(l(i,u),f&&l(f,u),m)for(var d=m.length-1;d>=0;d--)u.script.unshift(["type",m[d].matches,m[d].mode]);return{startState:function(){return{token:c,inTag:null,localMode:null,localState:null,htmlState:t.startState(s)}},copyState:function(e){var n;return e.localState&&(n=t.copyState(e.localMode,e.localState)),{token:e.token,inTag:e.inTag,localMode:e.localMode,localState:n,htmlState:t.copyState(s,e.htmlState)}},token:function(t,e){return e.token(t,e)},indent:function(e,n,a){return!e.localMode||/^\s*<\//.test(n)?s.indent(e.htmlState,n,a):e.localMode.indent?e.localMode.indent(e.localState,n,a):t.Pass},innerMode:function(t){return{state:t.localState||t.htmlState,mode:t.localMode||s}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")});